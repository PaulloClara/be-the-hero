(function(t){function e(e){for(var o,r,i=e[0],c=e[1],l=e[2],d=0,p=[];d<i.length;d++)r=i[d],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&p.push(n[r][0]),n[r]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);u&&u(e);while(p.length)p.shift()();return s.push.apply(s,l||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],o=!0,i=1;i<a.length;i++){var c=a[i];0!==n[c]&&(o=!1)}o&&(s.splice(e--,1),t=r(r.s=a[0]))}return t}var o={},n={app:0},s=[];function r(e){if(o[e])return o[e].exports;var a=o[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=o,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(a,o,function(e){return t[e]}.bind(null,o));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var l=0;l<i.length;l++)e(i[l]);var u=c;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var o=a("85ec"),n=a.n(o);n.a},"1a04":function(t,e,a){},"276b":function(t,e,a){"use strict";var o=a("37d1"),n=a.n(o);n.a},2951:function(t,e,a){},"2c47":function(t,e,a){},"37d1":function(t,e,a){},"417d":function(t,e,a){"use strict";var o=a("f977"),n=a.n(o);n.a},"56d7":function(t,e,a){"use strict";a.r(e);var o=a("2b0e"),n=a("62ad"),s=a.n(n),r=a("5886"),i=a("2f62"),c=a("bc3a"),l=a.n(c),u=l.a.create({baseURL:"https://api-bethehero-omnistack11.herokuapp.com",timeout:2e4}),d=a("5935"),p={state:{logged:!1,profile:{id:"",name:"",email:"",whatsapp:"",city:"",uf:"",created_at:"",token:""},login:{email:"",password:""},register:{name:"",email:"",whatsapp:"",city:"",uf:"",password:""},status:{code:200,error:"",message:"",validation:{source:"",keys:[]}}},getters:{getField:d["a"]},mutations:{updateStatus(t,{status:e,data:a}){if(200===e||!a.statusCode)return t.status.code=e;a.code=a.statusCode,a.statusCode=void 0,t.status=a},updateSession(t,{token:e}){t.profile.token=e,localStorage.setItem("token",e),t.logged=""!==e},updateProfile(t,e){t.profile=e},updateField:d["c"]},actions:{async getProfile({state:t,commit:e},{token:a}){try{const o=await u.get("/sessions",{headers:{Authorization:`Bearer ${a}`}});if(e("updateStatus",o),200!==t.status.code)return;e("updateProfile",o.data)}catch({response:o}){e("updateStatus",o)}},async login({state:t,commit:e},{email:a,password:o}){try{const n=await u.post("/sessions",{email:a,password:o});if(e("updateStatus",n),200!==t.status.code)return;e("updateProfile",n.data.ong),e("updateSession",n.data)}catch({response:n}){e("updateStatus",n)}},async register({state:t,commit:e},a){try{const o=await u.post("/ongs",a);if(e("updateStatus",o),200!==t.status.code)return;e("updateProfile",o.data.ong),e("updateSession",o.data)}catch({response:o}){e("updateStatus",o)}}},namespaced:!0},m={state:{status:0,session:[],page:{list:[],currentPage:1,totalIncidents:1},register:{title:"",value:"",description:""},status:{code:200,error:"",message:"",validation:{source:"",keys:[]}}},getters:{getField:d["a"]},mutations:{updateStatus(t,{status:e,data:a}){if(200===e||!a.statusCode)return t.status.code=e;a.code=a.statusCode,a.statusCode=void 0,t.status=a},updatePage(t,{list:e,currentPage:a,totalIncidents:o}){t.page.list=e,t.page.currentPage=a,t.page.totalIncidents=o},updateIncidents(t,{incidents:e}){t.session=e},updateField:d["c"]},actions:{async getPage({state:t,commit:e},{page:a}){try{const o=await u.get(`/incidents?page=${a}`);if(e("updateStatus",o),200!==t.status.code)return;e("updatePage",{list:o.data,currentPage:a,totalIncidents:o.headers["X-Total-Counter"]})}catch({response:o}){e("updateStatus",o)}},async getSessionIncidents({state:t,commit:e},{token:a}){try{const o=await u.get("/sessions/incidents",{headers:{Authorization:`Bearer ${a}`}});if(e("updateStatus",o),200!==t.status.code)return;e("updateIncidents",{incidents:o.data})}catch({response:o}){e("updateStatus",o)}},async register({state:t,commit:e,dispatch:a},{token:o,title:n,value:s,description:r}){try{const i=await u.post("/incidents",{title:n,value:s,description:r},{headers:{Authorization:`Bearer ${o}`}});if(e("updateStatus",i),200!==t.status.code)return;a("getPage",{page:t.page.currentPage});const c=[i.data,...t.session];e("updateIncidents",{incidents:c})}catch({response:i}){e("updateStatus",i)}},async delete({state:t,commit:e,dispatch:a},{id:o,token:n}){try{const s=await u.delete(`/incidents/${o}`,{headers:{Authorization:`Bearer ${n}`}});if(e("updateStatus",s),200!==t.status.code)return;await a("getPage",{page:t.page.currentPage});const r=t.session.findIndex(t=>t.id===o),i=t.session.splice(r,1);e("updateIncidents",{incidents:i})}catch({response:s}){e("updateStatus",s)}}},namespaced:!0};o["a"].use(i["a"]);var h=new i["a"].Store({state:{loading:!0,alert:{configs:{title:"",text:"",icon:"",confirmButtonText:"OK",confirmButtonColor:"#e02041"},show:!1}},mutations:{updateLoading(t,{loading:e}){t.loading=e},updateAlert(t,{title:e,text:a,icon:o}){t.alert.configs.text=a,t.alert.configs.icon=o,t.alert.configs.title=e},updateAlertStatus(t,{show:e}){t.alert.show=e}},actions:{showAlert({commit:t},{title:e,text:a,icon:o}){t("updateAlert",{title:e,text:a,icon:o}),t("updateAlertStatus",{show:!0})}},modules:{ong:p,incident:m}}),g=a("8c4f"),f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"home"}},[t.logged?a("m-profile"):a("m-login")],1)},v=[],b=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"login"}},[o("section",[o("img",{attrs:{src:a("9b19"),alt:"Be The Hero"}}),o("form",{on:{submit:function(e){return e.preventDefault(),t.handleSubmit(e)}}},[o("h1",[t._v("Faça seu login")]),o("m-input",{attrs:{type:"email",name:"email",placeholder:"Seu Email"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),o("m-input",{attrs:{type:"password",name:"password",placeholder:"Sua Senha"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),o("m-button",{attrs:{type:"submit"}},[t._v("Entrar")]),o("m-link",{attrs:{to:{name:"register"},icon:["log-in",16,"#e02041"]}},[t._v(" Não tenho cadastro ")])],1)]),o("img",{attrs:{src:a("81c7"),alt:"heroes"}})])},w=[],y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("router-link",{attrs:{to:t.to}},[a("feather",{attrs:{type:t.icon[0],size:t.icon[1],stroke:t.icon[2]}}),t._t("default")],2)},_=[],$={name:"Link",props:["icon","to"]},x=$,k=(a("d753"),a("2877")),S=Object(k["a"])(x,y,_,!1,null,"15b572d1",null),O=S.exports,E=function(){var t=this,e=t.$createElement,a=t._self._c||e;return"textarea"===t.type?a("textarea",{attrs:{name:t.name,placeholder:t.placeholder},on:{change:function(e){return t.$emit("input",e.target.value)}}}):a("input",{attrs:{type:t.type,name:t.name,placeholder:t.placeholder,max:"number"===t.type?t.max:"",maxlength:"number"!==t.type?t.max:""},on:{change:function(e){return t.$emit("input",e.target.value)}}})},C=[],j={name:"Input",props:["type","name","max","placeholder"]},P=j,A=(a("d456"),Object(k["a"])(P,E,C,!1,null,"f5450ca4",null)),I=A.exports,B=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{attrs:{type:t.type},on:{click:function(e){return t.$emit("click",e)}}},[t._t("default")],2)},L=[],N={name:"Button",props:["type"]},F=N,T=(a("e1ea"),Object(k["a"])(F,B,L,!1,null,"6b6eaf71",null)),z=T.exports,R={name:"Login",components:{"m-link":O,"m-input":I,"m-button":z},computed:{...Object(d["b"])("ong",["login.email","login.password"])},methods:{async handleSubmit(){const{email:t,password:e}=this;this.$store.commit("updateLoading",{loading:!0}),t&&e&&(await this.$store.dispatch("ong/login",{email:t,password:e}),this.$store.commit("updateLoading",{loading:!1}),200!==this.$store.state.ong.status.code&&this.handleSubmitError())},handleSubmitError(){const{status:t}=this.$store.state.ong,e=401===t.code?{title:"Email e/ou Senha invalido(s)!",text:"Verifique com atenção se o Email e Senha estão corretos.",icon:"error"}:404===t.code?{title:"O Email não consta no banco de dados...",text:"Talvez a aplicação tenha reiniciado.",icon:"warning"}:{title:t.error,text:t.message,icon:"error"};this.$store.dispatch("showAlert",e)}}},D=R,H=(a("67a1"),Object(k["a"])(D,b,w,!1,null,"1efe5697",null)),G=H.exports,M=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"profile"}},[o("header",[o("img",{attrs:{src:a("9b19"),alt:"Be The Hero"}}),o("span",[t._v("Bem vindo, "+t._s(t.ong.name))]),o("m-button",{on:{click:function(e){return t.$router.push({name:"new-incident"})}}},[t._v(" Cadastrar novo caso ")]),o("div",{staticClass:"icon",on:{click:t.logout}},[o("feather",{attrs:{type:"power",size:"18",stroke:"#e02041"}})],1)],1),o("h1",[t._v("Casos cadastrados")]),o("ul",t._l(t.page.list,(function(e){return o("li",{key:e.id},[o("m-card",{on:{remove:function(a){return t.removeIncident(e)}},scopedSlots:t._u([{key:"title",fn:function(){return[t._v(t._s(e.title))]},proxy:!0},{key:"description",fn:function(){return[t._v(t._s(e.description))]},proxy:!0},{key:"value",fn:function(){return[t._v(" "+t._s(Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e.value))+" ")]},proxy:!0}],null,!0)})],1)})),0)])},V=[],J=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card"},[a("div",[a("strong",[t._v("CASO:")]),a("p",[t._t("title")],2)]),a("div",[a("strong",[t._v("DESCRIÇÂO:")]),a("p",[t._t("description")],2)]),a("div",{staticClass:"value"},[a("strong",[t._v("VALOR:")]),a("p",[t._t("value")],2)]),a("div",{staticClass:"icon",on:{click:function(e){return t.$emit("remove")}}},[a("feather",{attrs:{type:"trash-2",size:"20",stroke:"#a8a8b3"}})],1)])},U=[],q={name:"Card"},W=q,K=(a("93a8"),Object(k["a"])(W,J,U,!1,null,"4f6d9dd6",null)),X=K.exports,Q={name:"Profile",components:{"m-card":X,"m-button":z},computed:{ong(){return this.$store.state.ong.profile},page(){return this.$store.state.incident.page}},methods:{logout(){this.$store.commit("ong/updateSession",{token:""})},async removeIncident(t){const e=this.$store.state.ong.profile.token;await this.$store.dispatch("incident/delete",{token:e,...t}),200!==this.$store.state.incident.status.code&&this.handleRemoveIncidentError()},handleRemoveIncidentError(){const{status:t}=this.$store.state.incident,e=401===t.code?{title:"Operação invalida!",text:"",icon:"error"}:{title:t.error,text:t.message,icon:"error"};this.$store.dispatch("showAlert",e)},async getPage(t){await this.$store.dispatch("incident/getPage",{page:t})}},mounted(){0===this.$store.state.incident.page.list.length&&this.getPage(1)}},Y=Q,Z=(a("bbb2"),Object(k["a"])(Y,M,V,!1,null,"527105e2",null)),tt=Z.exports,et={name:"Home",components:{"m-login":G,"m-profile":tt},computed:{logged(){return this.$store.state.ong.logged}}},at=et,ot=Object(k["a"])(at,f,v,!1,null,null,null),nt=ot.exports,st=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"register"}},[o("div",[o("section",[o("img",{attrs:{src:a("9b19"),alt:"Be The Hero"}}),o("h1",[t._v("Cadastro")]),o("p",[t._v(" Faça seu cadastro, entre na plataforma e ajude pessoas a encontrarem os casos da sua ONG. ")]),o("m-link",{attrs:{to:{name:"home"},icon:["arrow-left",16,"#e02041"]}},[t._v(" Já tenho cadastro ")])],1),o("form",{on:{submit:function(e){return e.preventDefault(),t.handleSubmit(e)}}},[t.error?o("div",{staticClass:"error"},[t._v(t._s(t.error))]):t._e(),o("m-input",{attrs:{type:"text",name:"name",placeholder:"Nome da ONG"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),o("m-input",{attrs:{type:"email",name:"email",placeholder:"E-mail"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),o("m-input",{attrs:{type:"password",name:"password",placeholder:"Senha"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),o("m-input",{attrs:{type:"text",name:"whatsapp",max:"17",placeholder:"Whatsapp"},model:{value:t.whatsapp,callback:function(e){t.whatsapp=e},expression:"whatsapp"}}),o("m-group",[o("m-input",{attrs:{type:"text",name:"city",placeholder:"Cidade"},model:{value:t.city,callback:function(e){t.city=e},expression:"city"}}),o("m-input",{attrs:{type:"text",name:"uf",max:"2",placeholder:"UF"},model:{value:t.uf,callback:function(e){t.uf=e},expression:"uf"}})],1),o("m-button",{attrs:{type:"submit"}},[t._v("Cadastrar")])],1)])])},rt=[],it=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._t("default")],2)},ct=[],lt={name:"Group"},ut=lt,dt=(a("c3ef"),Object(k["a"])(ut,it,ct,!1,null,"77fca7e8",null)),pt=dt.exports,mt={name:"Register",components:{"m-link":O,"m-group":pt,"m-input":I,"m-button":z},data:()=>({error:""}),computed:{...Object(d["b"])("ong",["register.name","register.email","register.password","register.whatsapp","register.city","register.uf"])},methods:{async handleSubmit(){const{name:t,email:e,password:a,whatsapp:o,city:n,uf:s}=this;if(this.error="",t?e?o?n?s?a||(this.error="Campo Senha é obrigatorio!"):this.error="Campo UF é obrigatorio!":this.error="Campo Cidade é obrigatorio!":this.error="Campo Whatsapp é obrigatorio!":this.error="Campo E-mail é obrigatorio!":this.error="Campo Nome da ONG é obrigatorio!",this.$store.commit("updateLoading",{loading:!0}),await this.$store.dispatch("ong/register",{name:t,email:e,password:a,whatsapp:o,city:n,uf:s}),this.$store.commit("updateLoading",{loading:!1}),200!==this.$store.state.ong.status.code)return this.handleSubmitError();this.$router.push({name:"home"}),this.$store.dispatch("showAlert",{title:"Aviso importante!",text:"Essa aplicação é um teste, os dados serão resetados em breve...",icon:"warning"})},handleSubmitError(){const{status:t}=this.$store.state.ong,e=400===t.code?{title:"Email em uso!",text:"Esse email já esta cadastrado no banco de dados.",icon:"error"}:{title:t.error,text:t.message,icon:"error"};this.$store.dispatch("showAlert",e)}}},ht=mt,gt=(a("ab75"),Object(k["a"])(ht,st,rt,!1,null,"69104fca",null)),ft=gt.exports,vt=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"new-incident"}},[o("div",[o("section",[o("img",{attrs:{src:a("9b19"),alt:"Be The Hero"}}),o("h1",[t._v("Cadastrar novo caso")]),o("p",[t._v(" Descreva o caso detalhadamente para encontrar um herói para resolver isso. ")]),o("m-link",{attrs:{to:{name:"home"},icon:["arrow-left",16,"#e02041"]}},[t._v(" Voltar para home ")])],1),o("form",{on:{submit:function(e){return e.preventDefault(),t.handleSubmit(e)}}},[o("m-input",{attrs:{type:"text",name:"titulo",placeholder:"Titulo do caso"},model:{value:t.title,callback:function(e){t.title="string"===typeof e?e.trim():e},expression:"title"}}),o("m-input",{attrs:{type:"textarea",placeholder:"Descrição do caso"},model:{value:t.description,callback:function(e){t.description="string"===typeof e?e.trim():e},expression:"description"}}),o("m-input",{attrs:{type:"number",name:"value",placeholder:"Valor em reais"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),o("m-button",{attrs:{type:"submit"}},[t._v("Cadastrar")])],1)])])},bt=[],wt={name:"NewIncident",components:{"m-link":O,"m-input":I,"m-button":z},computed:{...Object(d["b"])("incident",["register.title","register.value","register.description"])},methods:{async handleSubmit(){const{title:t,value:e,description:a}=this;this.$store.commit("updateLoading",{loading:!0}),await this.$store.dispatch("incident/register",{token:this.$store.state.ong.profile.token,title:t,value:e,description:a}),this.$store.commit("updateLoading",{loading:!1}),200===this.$store.state.incident.status.code&&this.$router.push({name:"home"})}}},yt=wt,_t=(a("417d"),Object(k["a"])(yt,vt,bt,!1,null,"64985120",null)),$t=_t.exports;o["a"].use(g["a"]);var xt=new g["a"]({mode:"history",base:"/",routes:[{path:"/",name:"home",component:nt},{path:"/incidents/new",name:"new-incident",component:$t},{path:"/register",name:"register",component:ft}]}),kt=a("9483");Object(kt["a"])("/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(t){console.error("Error during service worker registration:",t)}});var St=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",{attrs:{id:"app"}},[t.loading?a("m-loading"):t._e(),t.alert?a("m-alert"):t._e(),a("router-view",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}]})],1)},Ot=[],Et=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"alert"}})},Ct=[],jt={name:"Alert",methods:{async show(){await this.$swal(this.$store.state.alert.configs),this.$store.commit("updateAlertStatus",{show:!1})}},mounted(){this.show()}},Pt=jt,At=Object(k["a"])(Pt,Et,Ct,!1,null,"2ca3f206",null),It=At.exports,Bt=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},Lt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"loading"}},[a("div"),a("div"),a("div"),a("div"),a("div"),a("div"),a("div"),a("div")])}],Nt={name:"Loading"},Ft=Nt,Tt=(a("276b"),Object(k["a"])(Ft,Bt,Lt,!1,null,"5b57b82c",null)),zt=Tt.exports,Rt={name:"App",components:{"m-alert":It,"m-loading":zt},computed:{loading(){return this.$store.state.loading},alert(){return this.$store.state.alert.show}},methods:{async startSession(){const t=localStorage.getItem("token");await this.$store.dispatch("ong/getProfile",{token:t}),200===this.$store.state.ong.status.code?this.$store.commit("ong/updateSession",{token:t}):this.$store.commit("ong/updateSession",{token:""})}},async mounted(){localStorage.getItem("token")&&await this.startSession(),this.$store.commit("updateLoading",{loading:!1})}},Dt=Rt,Ht=(a("034f"),Object(k["a"])(Dt,St,Ot,!1,null,null,null)),Gt=Ht.exports;o["a"].use(s.a),o["a"].use(r["a"]),o["a"].config.productionTip=!1,new o["a"]({router:xt,store:h,render:t=>t(Gt)}).$mount("#app")},"67a1":function(t,e,a){"use strict";var o=a("7475"),n=a.n(o);n.a},7475:function(t,e,a){},"81c7":function(t,e,a){t.exports=a.p+"img/heroes.1f4b5508.png"},"85ec":function(t,e,a){},"93a8":function(t,e,a){"use strict";var o=a("93b2"),n=a.n(o);n.a},"93b2":function(t,e,a){},"9b19":function(t,e,a){t.exports=a.p+"img/logo.7eea718b.svg"},ab75:function(t,e,a){"use strict";var o=a("cfd8"),n=a.n(o);n.a},bbb2:function(t,e,a){"use strict";var o=a("1a04"),n=a.n(o);n.a},c3ef:function(t,e,a){"use strict";var o=a("d7ce"),n=a.n(o);n.a},cfd8:function(t,e,a){},d456:function(t,e,a){"use strict";var o=a("2c47"),n=a.n(o);n.a},d753:function(t,e,a){"use strict";var o=a("f9fb"),n=a.n(o);n.a},d7ce:function(t,e,a){},e1ea:function(t,e,a){"use strict";var o=a("2951"),n=a.n(o);n.a},f977:function(t,e,a){},f9fb:function(t,e,a){}});
//# sourceMappingURL=app.cf7f2162.js.map